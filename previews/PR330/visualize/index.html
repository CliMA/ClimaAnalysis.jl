<!DOCTYPE html>
<html lang="en"><head><meta charset="UTF-8"/><meta name="viewport" content="width=device-width, initial-scale=1.0"/><title>Visualizing OutputVars · ClimaAnalysis.jl</title><meta name="title" content="Visualizing OutputVars · ClimaAnalysis.jl"/><meta property="og:title" content="Visualizing OutputVars · ClimaAnalysis.jl"/><meta property="twitter:title" content="Visualizing OutputVars · ClimaAnalysis.jl"/><meta name="description" content="Documentation for ClimaAnalysis.jl."/><meta property="og:description" content="Documentation for ClimaAnalysis.jl."/><meta property="twitter:description" content="Documentation for ClimaAnalysis.jl."/><script data-outdated-warner src="../assets/warner.js"></script><link href="https://cdnjs.cloudflare.com/ajax/libs/lato-font/3.0.0/css/lato-font.min.css" rel="stylesheet" type="text/css"/><link href="https://cdnjs.cloudflare.com/ajax/libs/juliamono/0.050/juliamono.min.css" rel="stylesheet" type="text/css"/><link href="https://cdnjs.cloudflare.com/ajax/libs/font-awesome/6.4.2/css/fontawesome.min.css" rel="stylesheet" type="text/css"/><link href="https://cdnjs.cloudflare.com/ajax/libs/font-awesome/6.4.2/css/solid.min.css" rel="stylesheet" type="text/css"/><link href="https://cdnjs.cloudflare.com/ajax/libs/font-awesome/6.4.2/css/brands.min.css" rel="stylesheet" type="text/css"/><link href="https://cdnjs.cloudflare.com/ajax/libs/KaTeX/0.16.8/katex.min.css" rel="stylesheet" type="text/css"/><script>documenterBaseURL=".."</script><script src="https://cdnjs.cloudflare.com/ajax/libs/require.js/2.3.6/require.min.js" data-main="../assets/documenter.js"></script><script src="../search_index.js"></script><script src="../siteinfo.js"></script><script src="../../versions.js"></script><link class="docs-theme-link" rel="stylesheet" type="text/css" href="../assets/themes/catppuccin-mocha.css" data-theme-name="catppuccin-mocha"/><link class="docs-theme-link" rel="stylesheet" type="text/css" href="../assets/themes/catppuccin-macchiato.css" data-theme-name="catppuccin-macchiato"/><link class="docs-theme-link" rel="stylesheet" type="text/css" href="../assets/themes/catppuccin-frappe.css" data-theme-name="catppuccin-frappe"/><link class="docs-theme-link" rel="stylesheet" type="text/css" href="../assets/themes/catppuccin-latte.css" data-theme-name="catppuccin-latte"/><link class="docs-theme-link" rel="stylesheet" type="text/css" href="../assets/themes/documenter-dark.css" data-theme-name="documenter-dark" data-theme-primary-dark/><link class="docs-theme-link" rel="stylesheet" type="text/css" href="../assets/themes/documenter-light.css" data-theme-name="documenter-light" data-theme-primary/><script src="../assets/themeswap.js"></script></head><body><div id="documenter"><nav class="docs-sidebar"><a class="docs-logo" href="../"><img src="../assets/logo.svg" alt="ClimaAnalysis.jl logo"/></a><div class="docs-package-name"><span class="docs-autofit"><a href="../">ClimaAnalysis.jl</a></span></div><button class="docs-search-query input is-rounded is-small is-clickable my-2 mx-auto py-1 px-2" id="documenter-search-query">Search docs (Ctrl + /)</button><ul class="docs-menu"><li><a class="tocitem" href="../">Home</a></li><li><a class="tocitem" href="../var/">OutputVars</a></li><li class="is-active"><a class="tocitem" href>Visualizing OutputVars</a></li><li><a class="tocitem" href="../read_files/">Reading NetCDF files</a></li><li><a class="tocitem" href="../rmse_var/">RMSEVariables</a></li><li><a class="tocitem" href="../visualize_rmse_var/">Visualizing RMSEVariables</a></li><li><a class="tocitem" href="../flat/">FlatVar</a></li><li><a class="tocitem" href="../api/">APIs</a></li><li><a class="tocitem" href="../howdoi/">How do I?</a></li><li><a class="tocitem" href="../developer/">Developer Documentation</a></li></ul><div class="docs-version-selector field has-addons"><div class="control"><span class="docs-label button is-static is-size-7">Version</span></div><div class="docs-selector control is-expanded"><div class="select is-fullwidth is-size-7"><select id="documenter-version-selector"></select></div></div></div></nav><div class="docs-main"><header class="docs-navbar"><a class="docs-sidebar-button docs-navbar-link fa-solid fa-bars is-hidden-desktop" id="documenter-sidebar-button" href="#"></a><nav class="breadcrumb"><ul class="is-hidden-mobile"><li class="is-active"><a href>Visualizing OutputVars</a></li></ul><ul class="is-hidden-tablet"><li class="is-active"><a href>Visualizing OutputVars</a></li></ul></nav><div class="docs-right"><a class="docs-navbar-link" href="https://github.com/CliMA/ClimaAnalysis.jl" title="View the repository on GitHub"><span class="docs-icon fa-brands"></span><span class="docs-label is-hidden-touch">GitHub</span></a><a class="docs-navbar-link" href="https://github.com/CliMA/ClimaAnalysis.jl/blob/main/docs/src/visualize.md" title="Edit source on GitHub"><span class="docs-icon fa-solid"></span></a><a class="docs-settings-button docs-navbar-link fa-solid fa-gear" id="documenter-settings-button" href="#" title="Settings"></a><a class="docs-article-toggle-button fa-solid fa-chevron-up" id="documenter-article-toggle-button" href="javascript:;" title="Collapse all docstrings"></a></div></header><article class="content" id="documenter-page"><h1 id="Visualizing-OutputVars"><a class="docs-heading-anchor" href="#Visualizing-OutputVars">Visualizing <code>OutputVar</code>s</a><a id="Visualizing-OutputVars-1"></a><a class="docs-heading-anchor-permalink" href="#Visualizing-OutputVars" title="Permalink"></a></h1><p>This page is under construction, in the meantime, consult <a href="../#Visualize"><code>Visualize</code></a>.</p><h3 id="Masking-part-of-the-output-in-GeoMakie"><a class="docs-heading-anchor" href="#Masking-part-of-the-output-in-GeoMakie">Masking part of the output in <code>GeoMakie</code></a><a id="Masking-part-of-the-output-in-GeoMakie-1"></a><a class="docs-heading-anchor-permalink" href="#Masking-part-of-the-output-in-GeoMakie" title="Permalink"></a></h3><p>When performing ocean or land simulations, it is often convenient to hide the other component (e.g., hide the ocean and focus on the continents). For <code>GeoMakie</code> plots, there is a direct way to accomplish this. In this section, we discuss this feature.</p><p>The main <code>GeoMakie</code> plots are <a href="../api/#ClimaAnalysis.Visualize.contour2D_on_globe!"><code>Visualize.contour2D_on_globe!</code></a> and <a href="../api/#ClimaAnalysis.Visualize.heatmap2D_on_globe!"><code>Visualize.heatmap2D_on_globe!</code></a>. Both these functions take a <code>mask</code> argument. By default, <code>mask</code> is <code>nothing</code>, meaning that the entire output is displayed on the globe. Alternatively, <code>mask</code> can be a collection of polygons that can be plotted with <a href="https://docs.makie.org/v0.21/reference/plots/poly"><code>Makie.poly</code></a>. <code>ClimaAnalysis</code> comes with the most important ones <a href="../api/#ClimaAnalysis.Visualize.oceanmask"><code>Visualize.oceanmask</code></a> and <a href="../api/#ClimaAnalysis.Visualize.landmask"><code>Visualize.landmask</code></a>, to hide ocean and continents respectively.</p><p>For example, suppose <code>var</code> it the variable we want to plot with a ocean mask</p><pre><code class="language-julia hljs">import ClimaAnalysis.Visualize: contour2D_on_globe!, oceanmask
import ClimaAnalysis.Utils: kwargs as ca_kwargs
import GeoMakie
import CairoMakie

fig = CairoMakie.Figure()

contour2D_on_globe!(fig,
                    var,
                    mask = oceanmask(),
                    more_kwargs = Dict(:mask =&gt; ca_kwargs(color = :blue)),
                   )

CairoMakie.save(&quot;myfigure.pdf&quot;, fig)</code></pre><p>In this example, we plotted <code>var</code> on the globe and overplotted a blue ocean. <code>ca_kwargs</code> (<code>Utils.kwargs</code>) is a convenience function to pass keyword arguments more easily.</p><p>The output might look something like:</p><p><img src="../assets/oceanmask.png" alt="oceanmask"/></p><h3 id="Plotting-bias"><a class="docs-heading-anchor" href="#Plotting-bias">Plotting bias</a><a id="Plotting-bias-1"></a><a class="docs-heading-anchor-permalink" href="#Plotting-bias" title="Permalink"></a></h3><p>After <a href="../api/#ClimaAnalysis.Var.bias">computing the bias</a> between observational and simulation data, you may want to plot the bias and display information such as the root mean squared error (RMSE) and the global bias in the plot. To do this, you use the function <a href="../api/#ClimaAnalysis.Visualize.plot_bias_on_globe!"><code>plot_bias_on_globe!(fig, sim, obs)</code></a>. In the example below, we plot the bias between our simulation and some observations stored in <code>ta_1d_average.nc</code>.</p><pre><code class="language-julia hljs">import ClimaAnalysis
import ClimaAnalysis.Visualize: plot_bias_on_globe!
import GeoMakie
import CairoMakie

obs_var = ClimaAnalysis.OutputVar(&quot;ta_1d_average.nc&quot;)
sim_var = ClimaAnalysis.get(ClimaAnalysis.simdir(&quot;simulation_output&quot;), &quot;ta&quot;)

fig = CairoMakie.Figure()
plot_bias_on_globe!(fig, sim_var, obs_var)
CairoMakie.save(&quot;myfigure.pdf&quot;, fig)</code></pre><p>The output produces something like:</p><p><img src="../assets/bias_plot.png" alt="biasplot"/></p><p>We can also plot the bias using an ocean mask. This also means we compute the bias only over land.</p><pre><code class="language-julia hljs">import ClimaAnalysis
import ClimaAnalysis.Visualize: plot_bias_on_globe!, oceanmask
import GeoMakie
import CairoMakie

obs_var = ClimaAnalysis.OutputVar(&quot;ta_1d_average.nc&quot;)
sim_var = ClimaAnalysis.get(ClimaAnalysis.simdir(&quot;simulation_output&quot;), &quot;ta&quot;)

fig = CairoMakie.Figure()
plot_bias_on_globe!(fig,
                    var,
                    mask = oceanmask(),
                    more_kwargs = Dict(:mask =&gt; ca_kwargs(color = :blue)),
                   )
CairoMakie.save(&quot;myfigure.pdf&quot;, fig)</code></pre><p>The output produces something like:</p><p><img src="../assets/bias_plot_oceanmask.png" alt="biasplot_oceanmask"/></p><p>We can also plot the bias using a custom mask generated from <code>make_lonlat_mask</code>.</p><div class="admonition is-info" id="Passing-a-masking-function-for-mask-2655f2301692bca7"><header class="admonition-header">Passing a masking function for `mask`<a class="admonition-anchor" href="#Passing-a-masking-function-for-mask-2655f2301692bca7" title="Permalink"></a></header><div class="admonition-body"><p>ClimaAnalysis do not support mask keyword arguments for masking functions. If you want the values of the mask to not show in a plot, then pass <code>true_val = NaN</code> as a keyword argument to <code>make_lonlat_mask</code>. The color of <code>NaN</code> is controlled by the keyword <code>nan_color</code> which can be passed for the plotting function (<code>:plot</code>).</p><p>Note that if the backend is CairoMakie, then the keyword <code>nan_color</code> does nothing. See this <a href="https://github.com/MakieOrg/Makie.jl/issues/4524">issue</a>.</p></div></div><pre><code class="language-julia hljs">import ClimaAnalysis
import ClimaAnalysis.Visualize: plot_bias_on_globe!, oceanmask
import GeoMakie
import CairoMakie

mask_var = ClimaAnalysis.OutputVar(&quot;ocean_mask.nc&quot;)
mask_fn = ClimaAnalysis.generate_lonlat_mask(mask_var, NaN, 1.0)

obs_var = ClimaAnalysis.OutputVar(&quot;ta_1d_average.nc&quot;)
sim_var = ClimaAnalysis.get(ClimaAnalysis.simdir(&quot;simulation_output&quot;), &quot;ta&quot;)

fig = CairoMakie.Figure()
plot_bias_on_globe!(fig, var, mask = mask_fn)
CairoMakie.save(&quot;myfigure.pdf&quot;, fig)</code></pre><p>The output produces something like:</p><p><img src="../assets/plot_bias_with_custom_mask.png" alt="bias_with_custom_mask_plot"/></p></article><nav class="docs-footer"><a class="docs-footer-prevpage" href="../var/">« OutputVars</a><a class="docs-footer-nextpage" href="../read_files/">Reading NetCDF files »</a><div class="flexbox-break"></div><p class="footer-message">Powered by <a href="https://github.com/JuliaDocs/Documenter.jl">Documenter.jl</a> and the <a href="https://julialang.org/">Julia Programming Language</a>.</p></nav></div><div class="modal" id="documenter-settings"><div class="modal-background"></div><div class="modal-card"><header class="modal-card-head"><p class="modal-card-title">Settings</p><button class="delete"></button></header><section class="modal-card-body"><p><label class="label">Theme</label><div class="select"><select id="documenter-themepicker"><option value="auto">Automatic (OS)</option><option value="documenter-light">documenter-light</option><option value="documenter-dark">documenter-dark</option><option value="catppuccin-latte">catppuccin-latte</option><option value="catppuccin-frappe">catppuccin-frappe</option><option value="catppuccin-macchiato">catppuccin-macchiato</option><option value="catppuccin-mocha">catppuccin-mocha</option></select></div></p><hr/><p>This document was generated with <a href="https://github.com/JuliaDocs/Documenter.jl">Documenter.jl</a> version 1.14.1 on <span class="colophon-date" title="Tuesday 9 September 2025 18:58">Tuesday 9 September 2025</span>. Using Julia version 1.11.6.</p></section><footer class="modal-card-foot"></footer></div></div></div></body></html>
